<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fraud NEWS</title>
    
</head>
<body>
<<<<<<< HEAD
    <h1>Fraud List</h1>
    <!-- 입력을 받을 input 요소 -->
    <input type="text" id="search1" placeholder="값을 입력하세요">
    <input type="text" id="search2" placeholder="값을 입력하세요">
    <input type="text" id="search3" placeholder="값을 입력하세요">
    <!-- 버튼을 누르면 URL로 이동하는 버튼 -->
    <button onclick="goToUrl()">URL로 이동</button>
    <!-- 데이터를 출력할 요소 -->
    <div id="output"></div>

    <script>
        // Fetch를 이용하여 데이터를 가져와서 출력하는 함수
        function fetchData() {
            fetch('/fraud')
                .then(response => response.json())
                .then(data => {
                    // JSON 데이터 파싱
                    const itemList = data.response.body.itemList.item;
                    // HTML 생성
                    let html = '';

                    // 요소를 담을 틀
                    itemList.forEach(item => {
                        html += `
                            <div class="item">
                                <p>Title:       ${item.titl}</p>
                                <p>Nation:      ${item.regn}&nbsp;${item.natn}</p>
                                <p>FraudType:   ${item.fraudType}</p>
                                <p>Date:        ${item.othbcDt}</p>
                                <p>${item.bdtCntnt}</p>
                            </div>
                        `;
                    });
                    // HTML에 삽입
                    document.getElementById('output').innerHTML = html;
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
        }

        // 입력된 값으로 URL을 구성하고 이동하는 함수
        function goToUrl() {
            // 입력된 값을 가져옵니다.
            var search1 = document.getElementById("search1").value;
            var search2 = document.getElementById("search2").value;
            var search3 = document.getElementById("search3").value;
            // URL을 구성합니다. 여기서는 입력된 값이 query string의 일부로 사용됩니다.
            var url = "http://apis.data.go.kr/B410001/cmmrcFraudCase/cmmrcFraudCase"
                    + "?" + "ServiceKey"
                    + "=1Oo0omv4bVoztr5VGKOWz2QJYFpy2gmu8Kq8DbYg%2F%2B7gX2EfMQBU2jTu6MpQfsbJoqxzTTyyyDdSfpVZ0FIPlA%3D%3D"
                    + "&" + "type" + "=" + "json"
                    + "&" + "numOfRows" + "=" + "1"
                    + "&" + "pageNo" + "=" + "1"
                    + "&" + "search1" + "=" + search1
                    + "&" + "search2" + "=" + search2
                    + "&" + "search3" + "=" + search3
                    + "&" + "_type" + "=" + "json"
                    + inputValue; // 여기에 경로를 적절히 변경해주세요.

            // 구성된 URL로 이동합니다.
            window.location.href = url;
        }

        // 페이지 로드 시 데이터 가져오기
        window.onload = fetchData;
=======
    <h1>사기 정보 검색</h1>
    <div>
        <input type="text" id="search1" placeholder="국가명 입력">
        <input type="text" id="search2" placeholder="뉴스 제목 입력">
        <input type="text" id="search3" placeholder="게시일자 입력">
        <button onclick="fetchFraudData()">검색</button>
    </div>
    <div id="results">결과가 여기에 표시됩니다.</div>

    <!-- Ensure the script is loaded at the end of the body to ensure all HTML elements are loaded -->
    <script>
        async function fetchFraudData() {
            const search1 = encodeURIComponent(document.getElementById('search1').value);
            const search2 = encodeURIComponent(document.getElementById('search2').value);
            const search3 = encodeURIComponent(document.getElementById('search3').value);
        
            const serviceKey = '1Oo0omv4bVoztr5VGKOWz2QJYFpy2gmu8Kq8DbYg%2F%2B7gX2EfMQBU2jTu6MpQfsbJoqxzTTyyyDdSfpVZ0FIPlA%3D%3D';
            const url = `http://apis.data.go.kr/B410001/cmmrcFraudCase/cmmrcFraudCase?ServiceKey=${serviceKey}&type=json&numOfRows=10&pageNo=1&search1=${search1}&search2=${search2}&search3=${search3}&_type=json`;
            
            try {
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const data = await response.json();
                displayResults(data);
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('results').innerHTML = '데이터를 불러오는 중 오류가 발생했습니다.';
            }
        }
        
        function displayResults(data) {
            const results = document.getElementById('results');
            results.innerHTML = ''; // 결과 영역 초기화
        
            if (data && data.response && data.response.body && data.response.body.itemList && data.response.body.itemList.item) {
                data.response.body.itemList.item.forEach(item => {
                    const div = document.createElement('div');
                    div.innerHTML = `
                        <h3>${item.titl}</h3>
                        <p>국가: ${item.natn}</p>
                        <p>지역: ${item.regn}</p>
                        <p>사기 유형: ${item.fraudType}</p>
                        <p>게시 일자: ${item.othbcDt}</p>
                        <p>내용: ${item.bdtCntnt}</p>
                    `;
                    results.appendChild(div);
                });
            } else {
                results.innerHTML = '검색 결과가 없습니다.';
            }
        }
>>>>>>> origin/feature-jin
    </script>
</body>
</html>